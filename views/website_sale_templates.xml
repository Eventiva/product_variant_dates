<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Product Page - Show Sale Period Info -->
    <template id="product_sale_period_info" inherit_id="website_sale.product" name="Product Sale Period Info">
        <xpath expr="//h1[@itemprop='name']" position="after">
            <div t-if="combination_info.get('sale_period_info')" class="alert alert-info mb-3">
                <i class="fa fa-calendar me-2"></i>
                <span t-esc="combination_info['sale_period_info']"/>
            </div>
        </xpath>
    </template>

    <!-- Product Page - Hide Add to Cart if Sale Period Expired -->
    <template id="product_hide_expired_variants" inherit_id="website_sale.product" name="Hide Expired Variants">
        <xpath expr="//form[@t-if='product._is_add_to_cart_possible()']" position="attributes">
            <attribute name="t-if">product._is_add_to_cart_possible() and combination_info.get('is_sale_period_active', True)</attribute>
        </xpath>

        <!-- Show message when variant is not available due to sale period -->
        <xpath expr="//p[@t-elif='not product.active']" position="after">
            <p t-elif="not combination_info.get('is_sale_period_active', True)" class="alert alert-warning">
                <i class="fa fa-calendar-times me-2"></i>
                This variant is not currently available for sale.
                <t t-if="combination_info.get('sale_period_info')">
                    <br/>
                    <small t-esc="combination_info['sale_period_info']"/>
                </t>
            </p>
        </xpath>
    </template>

    <!-- Variants Template - Show Sale Period Info for Each Variant -->
    <template id="variants_sale_period_info" inherit_id="website_sale.variants" name="Variants Sale Period Info">
        <xpath expr="//div[@class='radio_input_value form-check-label']" position="inside">
            <div t-if="combination_info.get('sale_period_info')" class="small text-muted mt-1">
                <i class="fa fa-calendar me-1"></i>
                <span t-esc="combination_info['sale_period_info']"/>
            </div>
        </xpath>
    </template>


    <!-- Product List - Show Sale Period Info -->
    <template id="products_item_sale_period_info" inherit_id="website_sale.products_item" name="Products Item Sale Period Info">
        <xpath expr="//form[@class='oe_product_cart h-100 d-flex']" position="inside">
            <div t-if="product.sale_period_info" class="position-absolute top-0 end-0 p-2">
                <small class="badge bg-info text-white">
                    <i class="fa fa-calendar me-1"></i>
                    <span t-esc="product.sale_period_info"/>
                </small>
            </div>
        </xpath>
    </template>

</odoo>
